// ============================================
// SUJET : Programmation Orientée Objet en Deca
// ============================================

// --------------------------------------------
// QUESTION 1 : Classe simple et attributs
// --------------------------------------------

class Point {
    float x;
    float y;

    void setPoint(float x, float y) {
        this.x = x;
        this.y = y;
    }

    float norm2() {
        return x * x + y * y;
    }

}

// --------------------------------------------
// QUESTION 2 : Héritage
// --------------------------------------------

class ColoredPoint extends Point {
    int color;

    void setColoredPoint(float x, float y, int c) {
        ((Point)(this)).setPoint(x, y);
        color = c;
    }
}

// --------------------------------------------
// QUESTION 3 : Méthodes et this
// --------------------------------------------

class Rectangle {
    float width;
    float height;

    void setRectangle(float w, float h) {
        width = w;
        height = h;
    }

    float area() {
        return width * height;
    }
}

// --------------------------------------------
// QUESTION 4 : Polymorphisme
// --------------------------------------------

class Shape {
    float area() {
        return 0.0;
    }
}

class Square extends Shape {
    float side;

    void setSquare(float s) {
        side = s;
    }

    float area() {
        (Shape)(this).area();
        return side * side;
    }
}

// --------------------------------------------
// QUESTION 5 : instanceof et cast
// --------------------------------------------

{
    Point p = new Point();
    ColoredPoint cp = new ColoredPoint();
    Rectangle r = new Rectangle();
    Shape s = new Square();
    Square sq = new Square();
    Square s2;

    // --- Q1 ---
    p.setPoint(3.0, 4.0);
    println(p.norm2());

    // --- Q2 ---
    cp.setColoredPoint(1.0, 2.0, 7);
    println(cp.color);
    println(cp.norm2());

    // --- Q3 ---
    r.setRectangle(3.0, 5.0);
    println(r.area());

    // --- Q4 ---
    sq.setSquare(4.0);

    // Une classe mère ne peut pas accéder aux méthodes de la classe fille
    println(s.area()); // 0.0 (car area() de Shape)

    if (sq instanceof Shape) {
        println(sq.area()); // 16.0
    }
}